server {
    listen 80;
    server_name 130.94.40.85;
    
    # Root directory for the ecommerce app
    root /www/wwwroot;
    
    # Serve the main React app
    location /ecommerce/ {
        alias /www/wwwroot/ecommerce/;
        index index.html;
        try_files $uri $uri/ /ecommerce/index.html;
        
        # Set proper headers for HTML files
        location ~* \.html$ {
            add_header Content-Type text/html;
        }
    }
    
    # Serve assets with proper MIME types
    location /ecommerce/assets/ {
        alias /www/wwwroot/ecommerce/assets/;
        
        # Set proper MIME types
        location ~* \.js$ {
            add_header Content-Type application/javascript;
            expires 1y;
            add_header Cache-Control "public, immutable";
        }
        
        location ~* \.css$ {
            add_header Content-Type text/css;
            expires 1y;
            add_header Cache-Control "public, immutable";
        }
        
        location ~* \.(png|jpg|jpeg|gif|ico|svg)$ {
            expires 1y;
            add_header Cache-Control "public, immutable";
        }
    }
    
    # Handle other static files
    location /ecommerce/ {
        alias /www/wwwroot/ecommerce/;
        try_files $uri $uri/ /ecommerce/index.html;
    }
}
